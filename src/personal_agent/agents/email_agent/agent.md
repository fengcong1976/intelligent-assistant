---
name: send_email
description: 发送邮件给指定联系人或邮箱地址，支持批量发送
version: "1.0.0"
tags: ["email", "communication", "send"]
---

## Description

这个技能用于发送邮件给指定的收件人。支持发送给通讯录中的联系人或直接输入邮箱地址。可以发送纯文本邮件或带附件的邮件。支持批量发送给一组联系人。

## When to use

- 用户说"发邮件给XXX"
- 用户说"发送文件到XXX邮箱"
- 用户说"给XXX发一封邮件"
- 用户说"给我的家人/同学/同事发邮件"
- 用户提到"邮件"、"发送"、"邮箱"等关键词
- 用户需要发送PDF、文档等附件

## How to use

1. 单人发送：
   - action=send
   - params: to=收件人邮箱或姓名, subject=主题, content=内容
   
2. 批量发送（按关系）：
   - action=send_to_relationship
   - params: relationship=关系类型(如"家人"、"同学"), subject=主题, content_template=内容模板
   - 系统会自动查询该关系的所有联系人并发送邮件
   - 内容模板支持 {name} 占位符，会替换为联系人姓名
   
3. 确定邮件内容：
   - 如果用户指定了主题和内容，直接使用
   - 如果用户只说了意图，使用 LLM 生成合适的邮件内容
   
4. 处理附件：
   - 如果用户提到发送文件，查找文件路径

## Edge cases

- 收件人不在通讯录中时，询问用户邮箱地址
- 批量发送时，部分联系人没有邮箱，跳过并告知用户
- 邮件发送失败时，记录错误并告知用户
- 用户没有配置邮箱时，引导用户去设置页面配置
