---
name: query_weather
description: 查询天气信息工具，支持当前天气和天气预报
version: 1.0.0
---

# 天气查询工具

## 功能说明
本工具用于查询天气信息，支持以下功能：
- 查询当前天气
- 查询未来几天的天气预报
- 支持查询任意城市的天气
- 返回温度、天气状况、湿度、风向等信息

## 参数说明

### current_weather（当前天气）
- `city`: 城市名称
  - 类型：string
  - 示例："北京"、"上海"、"广州"
  - 说明：可选参数，如果不提供则使用用户设置的默认城市

### forecast（天气预报）
- `city`: 城市名称
  - 类型：string
  - 示例："北京"
  - 说明：可选参数，如果不提供则使用默认城市

- `days`: 天数
  - 类型：integer
  - 示例：3、7
  - 说明：可选参数，默认3天，最多7天

## 使用场景

### 场景1：查询当前天气
```
用户："北京天气怎么样"
调用：current_weather(city="北京")
```

### 场景2：查询默认城市天气
```
用户："今天天气"
调用：current_weather()
```

### 场景3：查询未来天气
```
用户："明天会下雨吗"
调用：forecast(days=1)
```

### 场景4：查询一周天气
```
用户："下周天气"
调用：forecast(days=7)
```

### 场景5：查询特定城市天气预报
```
用户："上海未来三天天气"
调用：forecast(city="上海", days=3)
```

## 返回信息

### 当前天气包含
- 城市
- 温度（当前温度、最高温度、最低温度）
- 天气状况（晴、多云、雨、雪等）
- 湿度
- 风向和风力
- 空气质量（可选）

### 天气预报包含
- 未来N天的天气
- 每天的最高/最低温度
- 每天的天气状况
- 每天的风力风向

## 注意事项

### 1. 城市识别
- 支持中文城市名
- 支持英文城市名
- 城市名不识别时会询问用户具体城市

### 2. 默认城市
- 用户可以设置默认城市
- 查询时不指定城市则使用默认城市
- 默认城市在设置中配置

### 3. 天气预报天数
- 最少1天
- 最多7天
- 超过7天时会提示用户

### 4. 天气查询失败
- 网络问题：提示用户检查网络连接
- 服务不可用：提示用户稍后重试
- 城市不存在：提示用户确认城市名称

### 5. 天气状况描述
- 晴：晴朗、阳光充足
- 多云：云量较多
- 阴：天空阴暗
- 雨：小雨、中雨、大雨
- 雪：小雪、中雪、大雪
- 雾：有雾

## 常见问题

### Q1：如何设置默认城市？
A：在设置页面中配置默认城市。

### Q2：可以查询国外城市天气吗？
A：支持查询全球主要城市的天气。

### Q3：天气预报准确吗？
A：天气预报基于气象数据，准确率较高，但天气变化莫测，仅供参考。

### Q4：查询失败怎么办？
A：检查网络连接，稍后重试，或确认城市名称是否正确。

## 示例对话

### 示例1：查询当前天气
```
用户：北京天气怎么样
系统：北京当前天气：
- 温度：15°C（最高18°C，最低12°C）
- 天气：多云
- 湿度：65%
- 风向：东南风，3级
```

### 示例2：查询未来天气
```
用户：明天会下雨吗
系统：明天天气预报：
- 天气：小雨
- 温度：12°C - 16°C
- 风向：北风，2级
建议：出门记得带伞
```

### 示例3：查询一周天气
```
用户：下周天气
系统：未来7天天气预报：
- 周一：晴，15°C - 22°C
- 周二：多云，16°C - 23°C
- 周三：小雨，14°C - 20°C
- ...
```

## 相关工具
- `query_tools`: 查询可用工具
- `calendar`: 日历管理（可以根据天气安排活动）
